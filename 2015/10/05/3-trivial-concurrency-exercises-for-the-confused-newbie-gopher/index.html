<!DOCTYPE html>
<html xmlns="//www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

        <title>3 Trivial Concurrency Exercises for the Confused Newbie Gopher &middot; Whipperstacker</title>
        <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Open+Sans:400,300,600' type='text/css'>
        <link rel="stylesheet" href="http://whipperstacker.com/libraries/normalize.3.0.1.css" />
        <link rel="stylesheet" href="http://whipperstacker.com/css/whipperstacker.css" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-144-precomposed.png" sizes="144x144" />
        <link rel="alternate" href="" type="application/rss+xml" title="Whipperstacker" />
    </head>
    <body class="li-body">

<header class="li-page-header">
    <div class="container">
        <div class="row">
            <div class="sixteen columns">
                <div class="li-brand li-left">
                <a href="http://whipperstacker.com/">Whipperstacker</a></div>
                <div class="li-menu li-right">
                    <span class="li-menu-icon" onclick="javascript:toggle('menu');">&#9776;</span>
                    <ul id="menu2" class="li-menu-items">
                        
                            <li><a href="/post/"> Archives </a></li>
                        
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="sixteen columns">
                <ul id="menu" class="li-menu-items li-menu-mobile">
                    
                        <li><a href="/post/"> Archives </a></li>
                    
                </ul>
            </div>
        </div>
    </div>
</header>






    <div class="container">
        <div class="row">
            <div class="sixteen columns">
                <article class="li-article">
                    <header class="li-article-header">
                        <h1 class="li-article-title">3 Trivial Concurrency Exercises for the Confused Newbie Gopher</h1>
                        <span class="li-article-taxonomies">
                            
                                Posted in
                                
                                    <a href="http://whipperstacker.com//categories/exercises">exercises</a>
                                
                            

                            
                                with tags
                                
                                    <a href="http://whipperstacker.com//tags/concurrency">concurrency</a>
                                
                            
                        </span>
                         - 
                        <time class="li-article-date">Monday, October 5, 2015</time>
                    </header>
                    <section>
                        

<p>The application is hanging and you have no idea what&rsquo;s going on. You&rsquo;ve watched the videos, you&rsquo;ve read the documentation, and you&rsquo;re <em>just not getting it</em>.</p>

<p>If you&rsquo;re struggling to wrap your head around Go&rsquo;s concurrency primitives then you are not alone.</p>

<p>The internet is <a href="https://github.com/golang/go/wiki/LearnConcurrency">chock-full</a> of excellent resources explaining and demonstrating concurrency in Go, but if your brain is overflowing, then perhaps it&rsquo;s time to take a step back from the deadlocks and the race conditions, strip away real-world concerns like http and filesystems and parsing, and solve some toy problems.</p>

<p>These exercises tackle three concurrency-related problems. The basic concepts are the same whether you&rsquo;re dealing with multiplexing and reverse proxies or cupcakes and zombies.</p>

<p>There are probably several correct approaches to each of these exercises, and (of course) a multitude of incorrect ones.</p>

<h2 id="exercise-1-the-daily-walk:86f10a40f304d1b410c2059dc1ec265a">Exercise 1: The Daily Walk</h2>

<p>Every morning, Alice and Bob go for a walk, and being creatures of habit, they follow the same routine every day.</p>

<p>First, they both prepare, grabbing sunglasses, perhaps a belt, closing open windows, turning off ceiling fans, and pocketing their phones and keys.</p>

<p>Once they&rsquo;re both ready, which typically takes each of them between 60 and 90 seconds, they arm the alarm, which has a 60 second delay.</p>

<p>While the alarm is counting down, they both put on their shoes, a process which tends to take each of them between 35 and 45 seconds.</p>

<p>Then they leave the house together and lock the door, before the alarm has finished its countdown.</p>

<p><em>Write a program to simulate Alice and Bob&rsquo;s morning routine.</em></p>

<p>Here&rsquo;s some sample output from running a solution to this problem.</p>

<pre><code>Let's go for a walk!
Bob started getting ready
Alice started getting ready
Alice spent 72 seconds getting ready
Bob spent 76 seconds getting ready
Arming alarm.
Bob started putting on shoes
Alarm is counting down.
Alice started putting on shoes
Alice spent 37 seconds putting on shoes
Bob spent 39 seconds putting on shoes
Exiting and locking the door.
Alarm is armed.
</code></pre>

<h2 id="exercise-2-eating-tapas:86f10a40f304d1b410c2059dc1ec265a">Exercise 2: Eating Tapas</h2>

<p>Four friends are having dinner together. They ordered five dishes to share, each of which consists of between 5 and 10 morsels.</p>

<p>They eat leisurely, spending between 30 seconds and 3 minutes eating each morsel.</p>

<p><em>Write a program to simulate the meal.</em></p>

<p>Running the program might look something like this:</p>

<pre><code>Bon appétit!
Alice is enjoying some chorizo
Bob is enjoying some chopitos
Charlie is enjoying some pimientos de padrón
Dave is enjoying some croquetas
Alice is enjoying some patatas bravas
Charlie is enjoying some chorizo
Dave is enjoying some chopitos
Alice is enjoying some pimientos de padrón
Bob is enjoying some croquetas
Dave is enjoying some patatas bravas
Alice is enjoying some chorizo
Bob is enjoying some chopitos
Charlie is enjoying some pimientos de padrón
Alice is enjoying some croquetas
Bob is enjoying some patatas bravas
Dave is enjoying some chorizo
Charlie is enjoying some chopitos
Alice is enjoying some pimientos de padrón
Dave is enjoying some patatas bravas
Charlie is enjoying some croquetas
Bob is enjoying some chorizo
Alice is enjoying some chopitos
Charlie is enjoying some pimientos de padrón
Charlie is enjoying some patatas bravas
Dave is enjoying some croquetas
Alice is enjoying some chorizo
Bob is enjoying some chopitos
Bob is enjoying some pimientos de padrón
Charlie is enjoying some patatas bravas
Alice is enjoying some chopitos
Dave is enjoying some patatas bravas
Charlie is enjoying some chopitos
Alice is enjoying some patatas bravas
Bob is enjoying some patatas bravas
Dave is enjoying some patatas bravas
That was delicious!
</code></pre>

<h2 id="exercise-3-internet-café:86f10a40f304d1b410c2059dc1ec265a">Exercise 3: Internet Café</h2>

<p>A small internet café in a village just outside of Manilla has 8 computers, which are available on a first-come first-serve basis. When all the computers are taken, the next person in line has to wait until a computer frees up.</p>

<p>This morning several groups of tourists, 25 people in all, are waiting when the doors open.</p>

<p>Each person spends between 15 minutes and 2 hours online.</p>

<p><em>Write a program to simulate the computer usage at the café</em></p>

<p>Sample output:</p>

<pre><code>Tourist 4 is online.
Tourist 25 is online.
Tourist 9 is online.
Tourist 15 is online.
Tourist 1 is online.
Tourist 16 is online.
Tourist 2 is online.
Tourist 5 is online.
Tourist 17 waiting for turn.
Tourist 6 waiting for turn.
Tourist 3 waiting for turn.
Tourist 18 waiting for turn.
Tourist 7 waiting for turn.
Tourist 12 waiting for turn.
Tourist 13 waiting for turn.
Tourist 10 waiting for turn.
Tourist 19 waiting for turn.
Tourist 14 waiting for turn.
Tourist 11 waiting for turn.
Tourist 20 waiting for turn.
Tourist 22 waiting for turn.
Tourist 23 waiting for turn.
Tourist 24 waiting for turn.
Tourist 8 waiting for turn.
Tourist 21 waiting for turn.
Tourist 2 is done, having spent 15 minutes online.
Tourist 17 is online.
Tourist 5 is done, having spent 18 minutes online.
Tourist 6 is online.
Tourist 15 is done, having spent 40 minutes online.
Tourist 3 is online.
Tourist 16 is done, having spent 41 minutes online.
Tourist 18 is online.
Tourist 6 is done, having spent 40 minutes online.
Tourist 7 is online.
Tourist 4 is done, having spent 60 minutes online.
Tourist 12 is online.
Tourist 17 is done, having spent 64 minutes online.
Tourist 13 is online.
Tourist 1 is done, having spent 88 minutes online.
Tourist 10 is online.
Tourist 9 is done, having spent 100 minutes online.
Tourist 19 is online.
Tourist 25 is done, having spent 114 minutes online.
Tourist 14 is online.
Tourist 19 is done, having spent 24 minutes online.
Tourist 11 is online.
Tourist 7 is done, having spent 88 minutes online.
Tourist 20 is online.
Tourist 18 is done, having spent 107 minutes online.
Tourist 22 is online.
Tourist 3 is done, having spent 110 minutes online.
Tourist 23 is online.
Tourist 12 is done, having spent 100 minutes online.
Tourist 24 is online.
Tourist 13 is done, having spent 87 minutes online.
Tourist 8 is online.
Tourist 20 is done, having spent 26 minutes online.
Tourist 21 is online.
Tourist 11 is done, having spent 65 minutes online.
Tourist 24 is done, having spent 32 minutes online.
Tourist 8 is done, having spent 28 minutes online.
Tourist 10 is done, having spent 110 minutes online.
Tourist 23 is done, having spent 57 minutes online.
Tourist 14 is done, having spent 98 minutes online.
Tourist 22 is done, having spent 106 minutes online.
Tourist 21 is done, having spent 111 minutes online.
The place is empty, let's close up and go to the beach!
</code></pre>

<h2 id="notes:86f10a40f304d1b410c2059dc1ec265a">Notes</h2>

<p>Use <code>time.Sleep()</code> to simulate delays and activities.</p>

<p>Remember to seed math/rand so that people&rsquo;s activities (eating morsels and putting on shoes) take different amounts of time each time you run the code.</p>

<p>The exercises were inspired by William Kennedy&rsquo;s post <a href="http://www.goinggo.net/2014/02/the-nature-of-channels-in-go.html">The Nature Of Channels In Go</a>.</p>

<h2 id="stuck:86f10a40f304d1b410c2059dc1ec265a">Stuck?</h2>

<p>If you get stuck, ask for help on <a href="irc:irc.freenode.net/go-nuts">IRC</a> or <a href="http://blog.gopheracademy.com/gophers-slack-community/">Slack</a>, or try the <a href="https://forum.golangbridge.org/">Go Forum at GolangBridge</a>.</p>

                    </section>
                </article>

                <section class="subscribe">
  <div>
    <p>You should subscribe to my mailing list.</p>
    <form id="subscribe-form" method="post" action="https://tinyletter.com/whipperstacker">
      <label for="email" class="sr-only">Email</label>
      <input type="email" id="email" name="email" value="" placeholder=" email@example.com ">
      <button class="button" type="submit">Subscribe</button>
    </form>
  </div>
</section>


            </div>
        </div>

        <div class="row li-pagination">
            <div class="eight columns">
                <div class="li-pagination-previous">
                    
                        Later article<br />
                        <a href="http://whipperstacker.com/2015/10/05/silence-noisy-output-from-command-line-tools-by-monitoring-progress-with-siginfo"> Silence Noisy Output from Command-Line Tools by Monitoring Progress with SIGINFO</a>
                    
                </div>
            </div>
            <div class="eight columns">
                <div class="li-pagination-next">
                    
                        Older article<br />
                        <a href="http://whipperstacker.com/2015/10/03/run-a-godoc-server-locally-to-see-documentation-for-unpublished-packages"> Run a `godoc` Server Locally to See Documentation for Unpublished Packages</a>
                    
                </div>
            </div>
        </div>
    </div>

<footer class="li-page-footer">
    <div class="container">
        <div class="row">
            <div class="sixteen columns">
                <div class="li-page-footer-legal">
                  &copy; 2016 Katrina Owen. All rights reserved.
                </div>
            </div>
        </div>
    </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-70403679-1', 'auto');
  ga('send', 'pageview');
</script>

    <script type="text/javascript">
    <!--
    function toggle(id) {
        var e = document.getElementById(id);
        e.style.display == 'block' ? e.style.display = 'none' : e.style.display = 'block';
    }
    
    </script>
    <script type="text/javascript">
    <!--
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', ""]);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    -->
    </script>
    </body>
</html>

